{"version":3,"file":"commonHelpers.js","sources":["../src/js/server.js","../src/img/bi_x-octagon.svg","../src/js/message.js","../src/main.js"],"sourcesContent":["import axios, { Axios } from 'axios';\n\nconst instance = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n   headers: {\n     \"Content-Type\": \"application/json\",\n  },\n  params: {\n      key: '41582613-5fd86df2fe5af6dc3c1a0bcd8',\n    type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n   },\n});\n\nconst getAxiosData = (res) => res.data;\n\nexport const getImages = async (params) => {\n  return getAxiosData(await instance.get('', { params: params }));\n}\n","export default \"__VITE_ASSET__3108d0c6__\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport iconUrl from '../img/bi_x-octagon.svg';\n\nexport const showError = (text) => {\n    iziToast.error({\n      message:text,\n      position: 'topRight',\n      backgroundColor: 'red',\n      messageColor:'white',\n      iconUrl: `${iconUrl}`,\n      iconColor: 'white',\n    })\n}\n\nexport const showMessage = (text) => {\n    iziToast.error({\n      message:text,\n      position: 'topRight',\n      backgroundColor: 'green',\n      messageColor:'white',\n      iconColor: 'white',\n    })\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { getImages } from './js/server';\nimport { showError, showMessage } from './js/message';\n\nconst searchBtn = document.querySelector('.search-button');\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst loader = document.querySelector('.loader-div');\nconst loadBtn = document.querySelector('.load-button');\n\n\n\nlet doFetch = null;\n\nconst handleSearch = async () => {\n  if (doFetch !== null) {\n    loadBtn.removeEventListener('click', doFetch);\n    doFetch = null;\n  }\n\n  hideLoadBtn();\n  clearGallery();\n  const s = getSearch();\n  if (!s) {\n    showMessage('Input your request!');\n    return;\n  };\n  // console.log(s);\n  const imagesRequest = createImagesRequest(getSearch());\n\n  doFetch = async () => {\n    const { hits, page } = await makePromiseWithLoader(imagesRequest);\n    fillGallery(hits);\n\n    const card = document.querySelector('.card');\n    const vals = card.getBoundingClientRect();\n    if (page - 1 > 1) window.scrollBy({ top: vals.height * 2, behavior: 'smooth' });\n\n  }\n  await makePromiseWithLoader(doFetch);\n\n  loadBtn.addEventListener('click', doFetch);\n  \n  clearSearch();\n  \n}\n\nconst getSearch = () => {\n  return input.value.trim().split(' ').join('+');\n}\n\nform.addEventListener('submit', (event) => {\n  event.preventDefault();\n  handleSearch();\n})\n\n\n\nconst fillGallery = (itemsList) => {\n  const galleryList = document.querySelector('.gallery-list');\n  let content = '';\n\n  content = itemsList.reduce((content, item) => {\n    return content +\n      `<li class=\"card\">\n            <a href=\"${item.largeImageURL}\">\n          <img\n            src=\"${item.webformatURL}\"\n            alt=\"${item.tags}\"\n            class=\"image\"\n          />\n          </a>\n          <div class=\"description\">\n            <div class=\"desc-part\">\n              <span class=\"bold\">Likes</span><span>${item.likes}</span>\n            </div>\n            <div class=\"desc-part\">\n              <span class=\"bold\">Views</span><span>${item.views}</span>\n            </div>\n            <div class=\"desc-part\">\n              <span class=\"bold\">Comments</span><span>${item.comments}</span>\n            </div>\n            <div class=\"desc-part\">\n              <span class=\"bold\">Downloads</span><span>${item.downloads}</span>\n            </div>\n          </div>\n        </li>\n        `\n  }, '');\n\n  galleryList.insertAdjacentHTML('beforeend',content);\n  gallery.refresh();\n}\n\n\nconst createImagesRequest = (q) => {\n  let page = 1;\n  const per_page = 40; //40\n  let isLastPage = false;\n\n  return async () => {\n    try {\n      if (isLastPage) return [];\n      const { hits, total } = await getImages({ q, page, per_page });\n\n      if (total === 0) {\n        hideLoadBtn();\n        showError('Sorry, there are no images matching your search query. Please try again!');\n      }\n      else if (page >= Math.ceil(total / per_page)) {\n        isLastPage = true;\n        hideLoadBtn();\n        showMessage('We\\'re sorry, but you\\'ve reached the end of search results.');\n      }\n      else {\n        showLoadBtn();\n      }\n\n      page += 1;\n      \n      return { hits, page } ;\n\n    }\n    catch (error) {\n      showError('Error! No connection with server!');\n      return []; \n    }\n  }\n\n}\n\n\n\nconst makePromiseWithLoader = async(promise) => {\n  showLoader();\n  const resp = await promise();\n  hideLoader();\n  return resp;\n}\n\nconst showLoadBtn = () => {\n  loadBtn.style.display = 'flex';\n}\nconst hideLoadBtn = () => {\n  loadBtn.style.display = 'none';\n}\n\nconst clearGallery = () => {\n  const galleryList = document.querySelector('.gallery-list');\n  galleryList.innerHTML = '';\n}\n\nconst clearSearch = () => {\n  input.value = '';\n}\n\nconst hideLoader = () => {\n  loader.style.display = 'none';\n}\n\nconst showLoader = () => {\n   loader.style.display = 'flex';\n}\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  overlayOpacity: 0.1,\n  captionsData:'alt',\n});\n"],"names":["instance","axios","getAxiosData","res","getImages","params","iconUrl","showError","text","iziToast","showMessage","form","input","loader","loadBtn","doFetch","handleSearch","hideLoadBtn","clearGallery","getSearch","imagesRequest","createImagesRequest","hits","page","makePromiseWithLoader","fillGallery","vals","clearSearch","event","itemsList","galleryList","content","item","gallery","q","per_page","isLastPage","total","showLoadBtn","promise","showLoader","resp","hideLoader","SimpleLightbox"],"mappings":"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"}